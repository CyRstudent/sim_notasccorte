<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Nota de Corte</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
        }
        .slider-container {
            margin: 20px 0;
        }
        .slider-label {
            font-weight: bold;
        }
        .output-value {
            color: #333;
            margin-left: 10px;
        }
        .result {
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
        }
        .input-field {
            width: 50px;
            margin-left: 10px;
        }
    </style>
</head>
<body>

    <h1>Simulador de Nota de Corte para Universidades Andaluzas</h1>

    <!-- Fase Obligatoria -->
    <h2>Fase Obligatoria</h2>

    <div class="slider-container">
        <label class="slider-label">Lengua Castellana y Literatura (0-10):</label>
        <input type="range" id="lengua" min="0" max="10" step="0.1" value="5" oninput="syncInput('lengua')">
        <input type="number" id="lenguaInput" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('lengua')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Historia de España (0-10):</label>
        <input type="range" id="historia" min="0" max="10" step="0.1" value="5" oninput="syncInput('historia')">
        <input type="number" id="historiaInput" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('historia')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Lengua Extranjera (Inglés) (0-10):</label>
        <input type="range" id="ingles" min="0" max="10" step="0.1" value="5" oninput="syncInput('ingles')">
        <input type="number" id="inglesInput" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('ingles')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Asignatura Troncal de Modalidad (0-10):</label>
        <input type="range" id="troncal" min="0" max="10" step="0.1" value="5" oninput="syncInput('troncal')">
        <input type="number" id="troncalInput" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('troncal')">
    </div>

    <!-- Notas Medias de Bachillerato -->
    <h2>Fase Voluntaria y Nota de Corte</h2>

    <div class="slider-container">
        <label class="slider-label">Nota Media de Bachillerato 1 (0-10):</label>
        <input type="range" id="notaBach1" min="0" max="10" step="0.1" value="5" oninput="syncInput('notaBach1')">
        <input type="number" id="notaBach1Input" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('notaBach1')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Nota Media de Bachillerato 2 (0-10):</label>
        <input type="range" id="notaBach2" min="0" max="10" step="0.1" value="5" oninput="syncInput('notaBach2')">
        <input type="number" id="notaBach2Input" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('notaBach2')">
    </div>

    <!-- Nota de Acceso calculada a partir de las medias de bachillerato -->
    <div class="slider-container">
        <label class="slider-label">Nota de Acceso Calculada (Media de Bachillerato):</label>
        <span class="output-value" id="notaAccesoCalculada">0</span>
    </div>

    <!-- Selección de asignaturas y notas ponderadas de la fase voluntaria -->
    <div class="slider-container">
        <label class="slider-label">Calificación Materia 1 (0-10):</label>
        <input type="range" id="materia1" min="0" max="10" step="0.1" value="5" oninput="syncInput('materia1')">
        <input type="number" id="materia1Input" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('materia1')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Ponderación Materia 1 (0,1 o 0,2):</label>
        <input type="range" id="ponderacion1" min="0" max="0.2" step="0.1" value="0.1" oninput="syncInput('ponderacion1')">
        <input type="number" id="ponderacion1Input" class="input-field" min="0" max="0.2" step="0.1" value="0.1" oninput="syncSlider('ponderacion1')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Calificación Materia 2 (0-10):</label>
        <input type="range" id="materia2" min="0" max="10" step="0.1" value="5" oninput="syncInput('materia2')">
        <input type="number" id="materia2Input" class="input-field" min="0" max="10" step="0.1" value="5" oninput="syncSlider('materia2')">
    </div>

    <div class="slider-container">
        <label class="slider-label">Ponderación Materia 2 (0,1 o 0,2):</label>
        <input type="range" id="ponderacion2" min="0" max="0.2" step="0.1" value="0.1" oninput="syncInput('ponderacion2')">
        <input type="number" id="ponderacion2Input" class="input-field" min="0" max="0.2" step="0.1" value="0.1" oninput="syncSlider('ponderacion2')">
    </div>

    <!-- Nota de Corte Deseada -->
    <div class="slider-container">
        <label class="slider-label">Nota de Corte Deseada:</label>
        <input type="range" id="notaCorteDeseada" min="5" max="14" step="0.1" value="10" oninput="syncInput('notaCorteDeseada'); adjustGradesToReachGoal()">
        <input type="number" id="notaCorteDeseadaInput" class="input-field" min="5" max="14" step="0.1" value="10" oninput="syncSlider('notaCorteDeseada'); adjustGradesToReachGoal()">
    </div>

    <!-- Resultados -->
    <div class="result">
        <h2>Resultados:</h2>
        <p>Nota de Admisión Calculada: <span id="notaAdmision">0</span></p>
        <p id="resultadoFinal"></p>
    </div>

    <script>
        // Sincronizar la barra deslizadora con el campo de texto
        function syncSlider(id) {
            const slider = document.getElementById(id);
            const input = document.getElementById(id + 'Input');
            slider.value = input.value;
            updateResult();
        }

        // Sincronizar el campo de texto con la barra deslizadora
        function syncInput(id) {
            const slider = document.getElementById(id);
            const input = document.getElementById(id + 'Input');
            input.value = slider.value;
            updateResult();
        }

        function updateResult() {
            // Obtención de las notas de la fase obligatoria
            const lengua = parseFloat(document.getElementById('lengua').value);
            const historia = parseFloat(document.getElementById('historia').value);
            const ingles = parseFloat(document.getElementById('ingles').value);
            const troncal = parseFloat(document.getElementById('troncal').value);

            // Calcular la nota de acceso como la media de las cuatro notas de la fase obligatoria
            const notaAcceso = (lengua + historia + ingles + troncal) / 4;
            document.getElementById('notaAccesoCalculada').textContent = notaAcceso.toFixed(2);

            // Calcular la nota de admisión teniendo en cuenta las materias de la fase voluntaria
            const materia1 = parseFloat(document.getElementById('materia1').value);
            const ponderacion1 = parseFloat(document.getElementById('ponderacion1').value);
            const materia2 = parseFloat(document.getElementById('materia2').value);
            const ponderacion2 = parseFloat(document.getElementById('ponderacion2').value);
            const notaAdmision = notaAcceso + (materia1 * ponderacion1) + (materia2 * ponderacion2);
            document.getElementById('notaAdmision').textContent = notaAdmision.toFixed(2);

            return notaAdmision;
        }

        function adjustGradesToReachGoal() {
            const notaCorteDeseada = parseFloat(document.getElementById('notaCorteDeseada').value);
            let notaAdmision = updateResult();
            let materia1 = parseFloat(document.getElementById('materia1').value);
            let materia2 = parseFloat(document.getElementById('materia2').value);

            // Ajustar las notas de las materias proporcionalmente para alcanzar la nota de corte deseada
            while (notaAdmision < notaCorteDeseada && materia1 < 10 && materia2 < 10) {
                materia1 = Math.min(materia1 + 0.1, 10);
                materia2 = Math.min(materia2 + 0.1, 10);

                document.getElementById('materia1').value = materia1.toFixed(1);
                document.getElementById('materia2').value = materia2.toFixed(1);
                document.getElementById('materia1Input').value = materia1.toFixed(1);
                document.getElementById('materia2Input').value = materia2.toFixed(1);

                notaAdmision = updateResult();
            }

            if (notaAdmision < notaCorteDeseada) {
                document.getElementById('resultadoFinal').textContent = "No se puede alcanzar la nota de corte deseada con los valores actuales.";
            } else {
                document.getElementById('resultadoFinal').textContent = "Nota de corte alcanzada.";
            }
        }
    </script>
</body>
</html>
